<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Care Ranch - Audio Sessions</title>
  <meta name="description" content="Guided audio sessions from The Care Ranch">
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1>The Care Ranch</h1>
      <p>Guided Audio Sessions for Your Journey</p>
    </div>

    <!-- Player Section -->
    <div class="player-section">
      <div class="current-track">
        <h2 id="current-title">Select a session to begin</h2>
        <p id="current-subtitle">Choose from the playlist below</p>
      </div>

      <div class="audio-controls">
        <audio id="audio-player" class="audio-player" controls>
          <source id="audio-source" src="" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
      </div>

      <!-- Playlist -->
      <div class="playlist">
        <h3>Available Sessions</h3>
        <div id="playlist-container">
          <!-- Playlist items will be dynamically loaded here -->
        </div>
      </div>
    </div>

    <!-- Spotify Section (Optional) -->
    <!-- Uncomment and add your Spotify playlist URL below -->
    <!--
    <div class="spotify-section">
      <h3>Additional Playlists</h3>
      <div class="spotify-embed">
        <iframe
          style="border-radius:12px"
          src="https://open.spotify.com/embed/playlist/YOUR_PLAYLIST_ID"
          width="100%"
          height="380"
          frameBorder="0"
          allowfullscreen=""
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          loading="lazy">
        </iframe>
      </div>
    </div>
    -->

    <!-- Footer -->
    <div class="footer">
      <p>Â© 2025 The Care Ranch. All rights reserved.</p>
      <p style="margin-top: 8px;">For more information, visit <a href="#" target="_blank">thecareranch.com</a></p>
    </div>
  </div>

  <script>
    // Audio tracks configuration
    const tracks = [
      {
        title: "Arriving in the Desert",
        subtitle: "Begin your journey",
        file: "audio/Audio - TCR Arriving in the Dessert.mp3"
      },
      {
        title: "Daily Checkout Information",
        subtitle: "End of day reflection",
        file: "audio/Audio - TCR Daily checkout information.mp3"
      },
      {
        title: "Learning Edge, Staying Present",
        subtitle: "Mindfulness practice",
        file: "audio/Audio - TCR Learning Edge, Staying Present.mp3"
      },
      {
        title: "Meeting and Mapping Your Inner Path",
        subtitle: "Self-discovery session",
        file: "audio/Audio - TCR Meeting and Mapping your Inner Pa.mp3"
      },
      {
        title: "Preparing for the Day",
        subtitle: "Morning practice",
        file: "audio/Audio - TCR Preparing for the Day.mp3"
      }
    ];

    let currentTrackIndex = 0;
    const audioPlayer = document.getElementById('audio-player');
    const audioSource = document.getElementById('audio-source');
    const currentTitle = document.getElementById('current-title');
    const currentSubtitle = document.getElementById('current-subtitle');
    const playlistContainer = document.getElementById('playlist-container');

    // Format duration from seconds to MM:SS
    function formatDuration(seconds) {
      if (isNaN(seconds) || !isFinite(seconds)) return '--:--';
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    // Load and play track
    function loadTrack(index) {
      currentTrackIndex = index;
      const track = tracks[index];

      audioSource.src = track.file;
      audioPlayer.load();

      currentTitle.textContent = track.title;
      currentSubtitle.textContent = track.subtitle;

      // Update active state in playlist
      document.querySelectorAll('.playlist-item').forEach((item, i) => {
        item.classList.toggle('active', i === index);
      });

      // Auto-play
      audioPlayer.play().catch(e => {
        console.log('Auto-play prevented by browser. Click play to start.');
      });
    }

    // Create playlist items
    function createPlaylist() {
      tracks.forEach((track, index) => {
        const item = document.createElement('div');
        item.className = 'playlist-item';
        item.innerHTML = `
          <div class="number">${index + 1}</div>
          <div class="title">${track.title}</div>
          <div class="duration" id="duration-${index}">--:--</div>
        `;

        item.addEventListener('click', () => loadTrack(index));
        playlistContainer.appendChild(item);

        // Get duration for each track
        const tempAudio = new Audio(track.file);
        tempAudio.addEventListener('loadedmetadata', () => {
          const durationElement = document.getElementById(`duration-${index}`);
          if (durationElement) {
            durationElement.textContent = formatDuration(tempAudio.duration);
          }
        });
      });
    }

    // Auto-play next track when current ends
    audioPlayer.addEventListener('ended', () => {
      const nextIndex = (currentTrackIndex + 1) % tracks.length;
      loadTrack(nextIndex);
    });

    // Initialize playlist on page load
    window.addEventListener('DOMContentLoaded', () => {
      createPlaylist();

      // Optional: Auto-load first track (uncomment to enable)
      // loadTrack(0);
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') {
        const nextIndex = (currentTrackIndex + 1) % tracks.length;
        loadTrack(nextIndex);
      } else if (e.key === 'ArrowLeft') {
        const prevIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
        loadTrack(prevIndex);
      } else if (e.key === ' ' && e.target === document.body) {
        e.preventDefault();
        if (audioPlayer.paused) {
          audioPlayer.play();
        } else {
          audioPlayer.pause();
        }
      }
    });
  </script>
</body>
</html>
